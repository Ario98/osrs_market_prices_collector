# =============================================================================
# OSRS Market Data Collector - Environment Configuration
# =============================================================================
# Copy this file to .env and customize the values for your setup
# NEVER commit the .env file to version control (it's already in .gitignore)
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION (TimescaleDB)
# =============================================================================

# Database user name
POSTGRES_USER=osrs_trader

# Database password - CHANGE THIS to a secure password
# This is used by all services to connect to TimescaleDB
POSTGRES_PASSWORD=YourSecurePasswordHere123!

# Database name
POSTGRES_DB=osrs_market

# Database port (change if you have port conflicts)
DB_PORT=5432

# TimescaleDB timezone (MUST be UTC)
# This is enforced in the Docker configuration
TIMESCALE_TIMEZONE=UTC

# =============================================================================
# API CONFIGURATION (Wiki RS API)
# =============================================================================

# Base URL for the OSRS Wiki price API
API_BASE_URL=https://prices.runescape.wiki/api/v1/osrs

# User-Agent header - REQUIRED by the API
# Format: AppName/Version (ContactInfo)
# IMPORTANT: Replace YOUR_DISCORD_USERNAME with your actual Discord username
# Example: OSRS-Market-Collector/1.0 (Discord: johndoe#1234)
API_USER_AGENT=OSRS-Market-Collector/1.0 (Discord: YOUR_DISCORD_USERNAME)

# Rate limit in seconds between API requests
# The Wiki API enforces a maximum of 1 request per second
# Setting this to 1.0 ensures compliance with rate limits
API_RATE_LIMIT_SECONDS=1.0

# =============================================================================
# DATA COLLECTION CONFIGURATION
# =============================================================================

# How many months of historical data to backfill
# Default: 6 months
# Minimum recommended: 1 month
# Maximum: Depends on API availability (typically 6-12 months)
HISTORICAL_BACKFILL_MONTHS=6

# Safety overlap in minutes when restarting collectors
# This prevents gaps by re-collecting data from the last N minutes
# Default: 5 minutes (covers one 5-minute interval)
RESTART_OVERLAP_MINUTES=5

# Threshold in minutes for fast-catchup mode
# When real-time lag exceeds this, collector switches to faster intervals
# Default: 15 minutes
FAST_CATCHUP_THRESHOLD_MINUTES=15

# Interval in minutes for fast-catchup mode
# How often to poll API when catching up (still respects rate limits)
# Default: 2.5 minutes
FAST_CATCHUP_INTERVAL_MINUTES=2.5

# How often to sync collector state to database
# Number of records inserted before persisting state
# Default: 100 records
STATE_SYNC_FREQUENCY=100

# =============================================================================
# MONITORING & SAFETY CONFIGURATION
# =============================================================================

# Timezone strict mode - fail if naive datetime detected
# When enabled (true), the system will fail fast if it detects
# any timezone-unaware datetime objects
# Default: true (recommended for production)
TIMEZONE_STRICT_MODE=true

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DEBUG: Very verbose, useful for troubleshooting
# INFO: Normal operational logging (recommended)
# WARNING: Only warnings and errors
LOG_LEVEL=INFO

# =============================================================================
# GRAFANA CONFIGURATION
# =============================================================================

# Grafana admin username
GRAFANA_ADMIN_USER=admin

# Grafana admin password - CHANGE THIS for security
# Default login password (you'll be prompted to change on first login)
GRAFANA_ADMIN_PASSWORD=admin

# Grafana web interface port (change if you have port conflicts)
GRAFANA_PORT=3000

# =============================================================================
# TEST MODE CONFIGURATION
# =============================================================================

# Enable test mode to limit data collection to a subset of items
# Useful for testing and debugging
# Set to "true" to enable, "false" for full collection
TEST_MODE=false

# Comma-separated list of item IDs to collect in test mode
# Only used when TEST_MODE=true
# Example: 2,4,6,8,10,12,14,16,18,20
# Top 100 items by volume: 4151,4153,2,4,6,8,10,12,14,16,...
TEST_ITEM_IDS=2,4,6,8,10

# =============================================================================
# METADATA COLLECTION
# =============================================================================

# How often to update item metadata (in hours)
# Item metadata (names, IDs, properties) changes infrequently
# Default: 24 hours (daily)
METADATA_UPDATE_INTERVAL_HOURS=24

# =============================================================================
# STORAGE & RETENTION (Future Implementation)
# =============================================================================

# Data retention period in days (for automatic cleanup)
# Currently data is retained indefinitely
# Future: Set to 180 for 6 months, 365 for 1 year, etc.
# DATA_RETENTION_DAYS=180

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# --- DEVELOPMENT / TESTING ---
# TEST_MODE=true
# TEST_ITEM_IDS=2,4,6,8,10
# LOG_LEVEL=DEBUG
# HISTORICAL_BACKFILL_MONTHS=1

# --- PRODUCTION ---
# TEST_MODE=false
# LOG_LEVEL=INFO
# HISTORICAL_BACKFILL_MONTHS=6
# TIMEZONE_STRICT_MODE=true
# STATE_SYNC_FREQUENCY=100

# --- MINIMAL BACKFILL ---
# HISTORICAL_BACKFILL_MONTHS=1
# Good for quick testing without waiting for full backfill

# --- AGGRESSIVE BACKFILL ---
# HISTORICAL_BACKFILL_MONTHS=12
# Maximum historical data (may take weeks to complete)

# =============================================================================
